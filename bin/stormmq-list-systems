#!/usr/bin/env ruby
# encoding: utf-8
#--
# Copyright (c) 2010, Tony Byrne & StormMQ Ltd.
# All rights reserved.
#
# Please refer to the LICENSE file that accompanies this source
# for terms of use and redistribution.
#++

$:.unshift File.dirname(__FILE__) + '/../lib'

require 'yaml'

begin
  require 'commandline/optionparser'
rescue LoadError
  require 'rubygems'
  require 'commandline/optionparser'
end

require 'stormmq'

class StormMQ::Application::ListSystems < StormMQ::Application

  def initialize
    synopsis "[--help] | [--user USER] COMPANY"

    short_description "Lists all the systems known for a company"
    long_description  <<-EOF
To use this program, you must have added USER and secret key (not amqpUserPassword; key is 44 characters long)
to either /etc/stormmq/secret-keys.json or ~/.stormmq/secret-keys.json.
If your secret key contains a '/' character, then you must escape it as '\/'
    EOF
    options :help
    option_user
    expected_args :company
  end

  def main
    puts ARGV.to_yaml

    # self.rest_client.systems(opt.company).each {|c| puts c}
  end

end

StormMQ::Application::ListSystems.run
